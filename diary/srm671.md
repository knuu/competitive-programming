# div1 300 BearCries

- 解法
    - 配るDP
    - dp\[i\]\[s\]\[p\] = i番目まで見て、s個';'がペアになっていなくて、p個';'と'\_\*'がペアになっているときの場合の数
    - 更新
        - message[i] = ';'のとき
            - dp\[i+1\]\[s+1\]\[p\] += dp\[i\]\[s\]\[p\]
            - dp\[i+1\]\[s\]\[p-1\] += p \* dp\[i\]\[s\]\[p\] (p > 0) (ペアになっているp個のうちどれかとmessage[i]がペアになり、泣き顔が完成する)
        - message[i] = '\_'のとき
            - dp\[i+1\]\[s\]\[p\] += p \* dp\[i\]\[s\]\[p\] (ペアになっているp個のうちどれかとmessage[i]がペアになり、口が伸びる)
            - dp\[i+1\]\[s-1\]\[p+1\] += s \* dp\[i\]\[s\]\[p\] (s > 0) (ペアになっていないs個のうちどれかとmessage[i]がペアになり、ペアが1増える)
    - 初期化
        - dp\[0\]\[0\]\[0\] = 1
    - 答え
        - dp\[N\]\[0\]\[0\]
    - 計算量
        O(N^3)
- 知見
    - バランスを取る問題は、バランスを考えずに全探索・列挙して、バランスが取れているところを出力する
- 感想
    - ペアを作るための典型DPとしか考えられない
    - [オートマトンがあって、何もない状態→;だけ入った状態→;に1個以上の_が加わった状態(ここだけループ辺がある)→作り終わった状態 ってなっていて、今回要求されているのは2番目と3番めが0個である状態の個数なので・・って考えてた](https://twitter.com/uwitenpen/status/659314900011843584)
        - DP考えるときにオートマトンが頭になかった
- タグ: DP、配るDP、バランスを取るDP
- レベル: 3
